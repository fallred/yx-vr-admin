import{ad as ae,aa as Ge,bG as Qe,cw as ve,R as o,a6 as re,r as c,a2 as He,cl as Je,bE as Ye,bF as Ee,cf as be,an as Q,ar as Xe,cC as Ze,W as J,a0 as x,bw as ie,ba as oe,ck as Be,V as _e,cq as Te,ct as Ve,cu as te,bv as Fe,B as $e,ch as Ae,bm as De,cB as er,ab as rr,s as tr,aY as nr,C as me,o as ar}from"./index.d85f42cd.js";import{D as or}from"./index.bc2518e5.js";import{D as Me}from"./index.9a267f19.js";import{q as Ie,m as ir,e as ur,I as sr,J as ne,s as lr,a as fr,i as dr,F as cr,P as vr,r as mr}from"./index.72710f81.js";var pr=function(e){if(e&&e!==!0)return e},yr=pr;function hr(r){return ae(r)!=="object"?!1:r===null?!0:!(o.isValidElement(r)||r.constructor===RegExp||r instanceof Map||r instanceof Set||r instanceof HTMLElement||r instanceof Blob||r instanceof File||Array.isArray(r))}var gr=function(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Object.keys(i).reduce(function(P,F){var l=i[F];return Ie(l)||(P[F]=l),P},{});if(Object.keys(a).length<1||typeof window=="undefined"||ae(e)!=="object"||Ie(e)||e instanceof Blob)return e;var n=Array.isArray(e)?[]:{},v=function P(F,l){var m=Array.isArray(F),u=m?[]:{};return F==null||F===void 0?u:(Object.keys(F).forEach(function(p){var g=l?[l,p].flat(1):[p].flat(1),d=F[p],h=Qe(a,g),N=function(){var w=typeof h=="function"?h==null?void 0:h(d,p,F):p;if(Array.isArray(w)){u=ve(u,w,d);return}ae(w)==="object"&&!Array.isArray(n)?n=re(re({},n),w):ae(w)==="object"&&Array.isArray(n)?u=re(re({},u),w):w&&(u=ve(u,[w],d))};if(h&&typeof h=="function"&&N(),typeof window!="undefined"){if(hr(d)){var A=P(d,g);if(Object.keys(A).length<1)return;u=ve(u,[p],A);return}N()}}),t?u:F)};return n=Array.isArray(e)&&Array.isArray(n)?Ge(v(e)):ir({},v(e),n),n},br=gr,pe=0;function Fr(r){var e=c.exports.useState(function(){return r.proFieldKey?r.proFieldKey.toString():(pe+=1,pe.toString())}),i=He(e,1),t=i[0],a=c.exports.useRef(t),n=function(){var l=Ye(Ee.mark(function m(){var u,p;return Ee.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(u=r.request)===null||u===void 0?void 0:u.call(r,r.params,r);case 2:return p=d.sent,d.abrupt("return",p);case 4:case"end":return d.stop()}},m)}));return function(){return l.apply(this,arguments)}}();c.exports.useEffect(function(){return function(){pe+=1}},[]);var v=Je([a.current,r.params],n,{revalidateOnFocus:!1,shouldRetryOnError:!1,revalidateOnReconnect:!1}),P=v.data,F=v.error;return[P||F]}var X=globalThis&&globalThis.__assign||function(){return X=Object.assign||function(r){for(var e,i=1,t=arguments.length;i<t;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},X.apply(this,arguments)};function wr(r){var e,i=(typeof window!="undefined"?window:{}).URL,t=new i((e=window==null?void 0:window.location)===null||e===void 0?void 0:e.href);return Object.keys(r).forEach(function(a){var n=r[a];n!=null?Array.isArray(n)?(t.searchParams.delete(a),n.forEach(function(v){t.searchParams.append(a,v)})):n instanceof Date?Number.isNaN(n.getTime())||t.searchParams.set(a,n.toISOString()):typeof n=="object"?t.searchParams.set(a,JSON.stringify(n)):t.searchParams.set(a,n):t.searchParams.delete(a)}),t}function Cr(r,e){var i;r===void 0&&(r={}),e===void 0&&(e={disabled:!1});var t=c.exports.useState(),a=t[1],n=typeof window!="undefined"&&((i=window==null?void 0:window.location)===null||i===void 0?void 0:i.search),v=c.exports.useMemo(function(){return e.disabled?{}:new URLSearchParams(n||{})},[e.disabled,n]),P=c.exports.useMemo(function(){if(e.disabled)return{};if(typeof window=="undefined"||!window.URL)return{};var m=[];v.forEach(function(p,g){m.push({key:g,value:p})}),m=m.reduce(function(p,g){return(p[g.key]=p[g.key]||[]).push(g),p},{}),m=Object.keys(m).map(function(p){var g=m[p];return g.length===1?[p,g[0].value]:[p,g.map(function(d){var h=d.value;return h})]});var u=X({},r);return m.forEach(function(p){var g=p[0],d=p[1];u[g]=Rr(g,d,{},r)}),u},[e.disabled,r,v]);function F(m){if(!(typeof window=="undefined"||!window.URL)){var u=wr(m);window.location.search!==u.search&&window.history.replaceState({},"",u.toString()),v.toString()!==u.searchParams.toString()&&a({})}}c.exports.useEffect(function(){e.disabled||typeof window=="undefined"||!window.URL||F(X(X({},r),P))},[e.disabled,P]);var l=function(m){F(m)};return c.exports.useEffect(function(){if(e.disabled)return function(){};if(typeof window=="undefined"||!window.URL)return function(){};var m=function(){a({})};return window.addEventListener("popstate",m),function(){window.removeEventListener("popstate",m)}},[e.disabled]),[P,l]}var Pr={true:!0,false:!1};function Rr(r,e,i,t){if(!i)return e;var a=i[r],n=e===void 0?t[r]:e;return a===Number?Number(n):a===Boolean||e==="true"||e==="false"?Pr[n]:Array.isArray(a)?a.find(function(v){return v==n})||t[r]:n}var xr=["children","contentRender","submitter","fieldProps","formItemProps","groupProps","dateFormatter","formRef","onInit","form","formComponentType","extraUrlParams","syncToUrl","syncToInitialValues","onReset","omitNil","isKeyPressSubmit","autoFocusFirstInput","grid","rowProps","colProps"],Sr=["request","params","initialValues","formKey"],ye=function(e,i,t){return e===!0?i:mr(e,i,t)},ke=function(e){return!e||Array.isArray(e)?e:[e]};function Er(r){var e=r.children,i=r.contentRender,t=r.submitter,a=r.fieldProps,n=r.formItemProps,v=r.groupProps,P=r.dateFormatter,F=P===void 0?"string":P,l=r.formRef,m=r.onInit,u=r.form,p=r.formComponentType,g=r.extraUrlParams,d=g===void 0?{}:g,h=r.syncToUrl,N=r.syncToInitialValues,A=N===void 0?!0:N,T=r.onReset,w=r.omitNil,S=w===void 0?!0:w,M=r.isKeyPressSubmit,k=r.autoFocusFirstInput,W=k===void 0?!0:k,K=r.grid,C=r.rowProps,O=r.colProps,R=be(r,xr),j=c.exports.useContext(ie.SizeContext),I=oe.useForm(u),z=Q(I,1),B=z[0],L=Cr({},{disabled:!h}),U=Q(L,2),Y=U[0],H=U[1],V=c.exports.useRef(B||{}),je=ur({grid:K,rowProps:C,colProps:O}),we=je.RowWrapper,ue=c.exports.useRef({}),se=c.exports.useRef({}),D=c.exports.useCallback(function(f,s,y){return br(sr(f,F,ue.current,s,y),se.current,s)},[F]),Z=c.exports.useMemo(function(){return{getFieldsFormatValue:function(s){var y;return D((y=V.current)===null||y===void 0?void 0:y.getFieldsValue(s),S)},getFieldFormatValue:function(){var s,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=ke(y);if(!b)throw new Error("nameList is require");var E=(s=V.current)===null||s===void 0?void 0:s.getFieldValue(b),q=b?ne({},b,E):E;return lr(D(q,S,b),b)},getFieldFormatValueObject:function(s){var y,b=ke(s),E=(y=V.current)===null||y===void 0?void 0:y.getFieldValue(b),q=b?ne({},b,E):E;return D(q,S,b)},validateFieldsReturnFormatValue:function(){var f=Ve(te.mark(function y(b){var E,q;return te.wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(!Array.isArray(b)&&b)){$.next=2;break}throw new Error("nameList must be array");case 2:return $.next=4,(E=V.current)===null||E===void 0?void 0:E.validateFields(b);case 4:return q=$.sent,$.abrupt("return",D(q,S));case 6:case"end":return $.stop()}},y)}));function s(y){return f.apply(this,arguments)}return s}(),formRef:V}},[S,D]),ee=c.exports.useMemo(function(){var f=x({},V.current);return Object.keys(V.current||{}).forEach(function(s){Object.defineProperty(f,s,{get:function(){return V.current[s]}})}),Object.keys(Z).forEach(function(s){Object.defineProperty(f,s,{get:function(){return Z[s]}})}),f},[]),ze=Be(!1),Ce=Q(ze,2),le=Ce[0],fe=Ce[1],de=c.exports.useMemo(function(){return o.Children.toArray(e).map(function(f,s){return s===0&&o.isValidElement(f)&&W?o.cloneElement(f,x(x({},f.props),{},{autoFocus:W})):f})},[W,e]),G=c.exports.useMemo(function(){return typeof t=="boolean"||!t?{}:t},[t]);c.exports.useImperativeHandle(l,function(){return ee});var Pe=c.exports.useMemo(function(){if(t!==!1)return o.createElement(Vr,J({key:"submitter"},G,{onReset:function(){var s,y,b=D((s=V.current)===null||s===void 0?void 0:s.getFieldsValue(),S);if(G==null||(y=G.onReset)===null||y===void 0||y.call(G,b),T==null||T(b),h){var E,q=Object.keys(D((E=V.current)===null||E===void 0?void 0:E.getFieldsValue(),!1)).reduce(function(_,$){return x(x({},_),{},_e({},$,b[$]||void 0))},d);H(ye(h,q,"set"))}},form:ee,submitButtonProps:x({loading:le},G.submitButtonProps)}))},[t,G,ee,le,D,S,T,h,d,H]),Le=c.exports.useMemo(function(){var f=K?o.createElement(we,null,de):de;return i?i(f,Pe,V.current):f},[K,we,de,i,Pe]),Ue=c.exports.useMemo(function(){if(typeof window!="undefined"&&p&&["DrawerForm"].includes(p))return function(f){return f.parentNode||document.body}},[p]);c.exports.useEffect(function(){var f,s=D((f=V.current)===null||f===void 0?void 0:f.getFieldsValue(!0),S);m==null||m(s,ee)},[]);var qe=c.exports.useState(function(){return h?ye(h,Y,"get"):{}}),Re=Q(qe,2),Ke=Re[0],We=Re[1];c.exports.useEffect(function(){A||We({})},[A]);var xe=fr(r.initialValues);return c.exports.useEffect(function(){if(!(h||!r.initialValues||!xe||R.request)){var f=dr(r.initialValues,xe);Te(f,"initialValues \u53EA\u5728 form \u521D\u59CB\u5316\u65F6\u751F\u6548\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5F02\u6B65\u52A0\u8F7D\u63A8\u8350\u4F7F\u7528 request\uFF0C\u6216\u8005 initialValues ? <Form/> : null "),Te(f,"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null ")}},[r.initialValues]),c.exports.useEffect(function(){!h||H(x(x({},Y),d))},[d,h]),o.createElement(cr.Provider,{value:{grid:K,formRef:V,fieldProps:a,formItemProps:n,groupProps:v,formComponentType:p,getPopupContainer:Ue,setFieldValueType:function(s,y){var b=y.valueType,E=b===void 0?"text":b,q=y.dateFormat,_=y.transform;!Array.isArray(s)||(se.current=ne(se.current,s,_),ue.current=ne(ue.current,s,{valueType:E,dateFormat:q}))}}},o.createElement(vr.Provider,{value:Z},o.createElement(ie.SizeContext.Provider,{value:R.size||j},o.createElement(oe,J({onKeyPress:function(s){if(!!M&&s.key==="Enter"){var y;(y=V.current)===null||y===void 0||y.submit()}},form:B},R,{initialValues:x(x({},Ke),R.initialValues),onValuesChange:function(s,y){var b;R==null||(b=R.onValuesChange)===null||b===void 0||b.call(R,D(s,S),D(y,S))},onFinish:Ve(te.mark(function f(){var s,y,b,E;return te.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(R.onFinish){_.next=2;break}return _.abrupt("return");case 2:if(!le){_.next=4;break}return _.abrupt("return");case 4:return fe(!0),_.prev=5,y=D((s=V.current)===null||s===void 0?void 0:s.getFieldsValue(),S),_.next=9,R.onFinish(y);case 9:h&&(E=Object.keys(D((b=V.current)===null||b===void 0?void 0:b.getFieldsValue(),!1)).reduce(function($,Se){var ce;return x(x({},$),{},_e({},Se,(ce=y[Se])!==null&&ce!==void 0?ce:void 0))},d),Object.keys(Y).forEach(function($){E[$]!==!1&&E[$]!==0&&!E[$]&&(E[$]=void 0)}),H(ye(h,E,"set"))),fe(!1),_.next=16;break;case 13:_.prev=13,_.t0=_.catch(5),fe(!1);case 16:case"end":return _.stop()}},f,null,[[5,13]])}))}),R.component!==!1&&o.createElement("input",{type:"text",style:{display:"none"}}),o.createElement(oe.Item,{noStyle:!0,shouldUpdate:!0},function(f){return l&&(l.current=x(x({},f),Z)),V.current=f,null}),Le))))}var Ne=0;function _r(r){var e=r.request,i=r.params,t=r.initialValues,a=r.formKey,n=a===void 0?Ne:a,v=be(r,Sr);c.exports.useEffect(function(){Ne+=0},[]);var P=Fr({request:e,params:i,proFieldKey:n}),F=Q(P,1),l=F[0];return!l&&r.request?o.createElement("div",{style:{paddingTop:50,paddingBottom:50,textAlign:"center"}},o.createElement(Xe,null)):o.createElement(Ze,null,o.createElement(Er,J({autoComplete:"off"},v,{initialValues:x(x({},t),l)})))}var Tr=function(e){var i=Fe();if(e.render===!1)return null;var t=e.form,a=e.onSubmit,n=e.render,v=e.onReset,P=e.searchConfig,F=P===void 0?{}:P,l=e.submitButtonProps,m=e.resetButtonProps,u=m===void 0?{}:m,p=function(){t.submit(),a==null||a()},g=function(){t.resetFields(),v==null||v()},d=F.submitText,h=d===void 0?i.getMessage("tableForm.submit","\u63D0\u4EA4"):d,N=F.resetText,A=N===void 0?i.getMessage("tableForm.reset","\u91CD\u7F6E"):N,T=[];u!==!1&&T.push(o.createElement($e,J({},Ae(u,["preventDefault"]),{key:"rest",onClick:function(M){var k;u!=null&&u.preventDefault||g(),u==null||(k=u.onClick)===null||k===void 0||k.call(u,M)}}),A)),l!==!1&&T.push(o.createElement($e,J({type:"primary"},Ae(l||{},["preventDefault"]),{key:"submit",onClick:function(M){var k;l!=null&&l.preventDefault||p(),l==null||(k=l.onClick)===null||k===void 0||k.call(l,M)}}),h));var w=n?n(x(x({},e),{},{submit:p,reset:g}),T):T;return w?Array.isArray(w)?(w==null?void 0:w.length)<1?null:(w==null?void 0:w.length)===1?w[0]:o.createElement(De,{wrap:!0},w):w:null},Vr=Tr,$r=function(e,i,t){return e?o.createElement(o.Fragment,null,t.getMessage("tableForm.collapsed","\u5C55\u5F00"),o.createElement(Me,{style:{marginLeft:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})):o.createElement(o.Fragment,null,t.getMessage("tableForm.expand","\u6536\u8D77"),o.createElement(Me,{style:{marginLeft:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}}))},Ar=function(e){var i=e.setCollapsed,t=e.collapsed,a=t===void 0?!1:t,n=e.submitter,v=e.style,P=c.exports.useContext(ie.ConfigContext),F=P.getPrefixCls,l=Fe(),m=yr(e.collapseRender)||$r;return o.createElement(De,{style:v,size:16},n,e.collapseRender!==!1&&o.createElement("a",{className:F("pro-form-collapse-button"),onClick:function(){return i(!a)}},m==null?void 0:m(a,e,l)))},Mr=Ar,Ir=["collapsed","layout","defaultCollapsed","defaultColsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules"],he,ge,kr={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},Oe={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},Nr=function(e,i,t){if(t&&typeof t=="number")return{span:t,layout:e};var a=t?["xs","sm","md","lg","xl","xxl"].map(function(v){return[kr[v],24/t[v],"horizontal"]}):Oe[e||"default"],n=(a||Oe.default).find(function(v){return i<v[0]+16});return{span:24/n[1],layout:n[2]}},Or=function(e,i){return e.flatMap(function(t){var a;if((t==null?void 0:t.type.displayName)==="ProForm-Group"&&!(!((a=t.props)===null||a===void 0)&&a.title))return t.props.children;if(i&&o.isValidElement(t)){var n;return o.cloneElement(t,x(x({},t.props),{},{formItemProps:x(x({},(n=t.props)===null||n===void 0?void 0:n.formItemProps),{},{rules:[]})}))}return t})},Br=function(e){var i=Fe(),t=e.resetText||i.getMessage("tableForm.reset","\u91CD\u7F6E"),a=e.searchText||i.getMessage("tableForm.search","\u641C\u7D22"),n=nr(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),v=Q(n,2),P=v[0],F=v[1],l=e.optionRender,m=e.collapseRender,u=e.split,p=e.items,g=e.spanSize,d=e.showLength,h=e.searchGutter,N=c.exports.useMemo(function(){return!e.submitter||l===!1?null:o.cloneElement(e.submitter,x({searchConfig:{resetText:t,submitText:a},render:l&&function(C,O){return l(x(x({},e),{},{resetText:t,searchText:a}),e,O)}},e.submitter.props))},[e,t,a,l]),A=0,T=0,w=!1,S=0,M=0,k=Or(p,e.ignoreRules).map(function(C,O){var R,j,I,z,B=o.isValidElement(C)&&(R=C==null||(j=C.props)===null||j===void 0?void 0:j.colSize)!==null&&R!==void 0?R:1,L=Math.min(g.span*(B||1),24);if(A+=L,S+=B,O===0){var U;w=L===24&&!(!(C==null||(U=C.props)===null||U===void 0)&&U.hidden)}var Y=(C==null||(I=C.props)===null||I===void 0?void 0:I.hidden)||P&&(w||S>=d-1)&&!!O&&A>=24;T+=1;var H=o.isValidElement(C)&&(C.key||"".concat((z=C.props)===null||z===void 0?void 0:z.name))||O;return o.isValidElement(C)&&Y?e.preserve?{itemDom:o.cloneElement(C,{hidden:!0,key:H||O}),hidden:!0,colSpan:L}:{itemDom:null,colSpan:L,hidden:!0}:{itemDom:C,colSpan:L,hidden:!1}}).map(function(C,O){var R,j,I=C.itemDom,z=C.colSpan,B=I==null||(R=I.props)===null||R===void 0?void 0:R.hidden;if(B)return I;var L=o.isValidElement(I)&&(I.key||"".concat((j=I.props)===null||j===void 0?void 0:j.name))||O;24-M%24<z&&(A+=24-M%24,M+=24-M%24),M+=z;var U=o.createElement(me,{key:L,span:z},I);return u&&M%24===0&&O<T-1?[U,o.createElement(me,{span:"24",key:"line"},o.createElement(or,{style:{marginTop:-8,marginBottom:16},dashed:!0}))]:U}),W=c.exports.useMemo(function(){return!(A<24||S<d)},[T,d,A]),K=c.exports.useMemo(function(){var C=M%24+g.span;return 24-C},[M,g.span]);return o.createElement(ar,{gutter:h,justify:"start",key:"resize-observer-row"},k,N&&o.createElement(me,{key:"submitter",span:g.span,offset:K,style:{textAlign:"right"}},o.createElement(oe.Item,{label:" ",colon:!1,className:"pro-form-query-filter-actions"},o.createElement(Mr,{key:"pro-form-query-filter-actions",collapsed:P,collapseRender:W?m:!1,submitter:N,setCollapsed:F}))))},Dr=er()?(he=document)===null||he===void 0||(ge=he.body)===null||ge===void 0?void 0:ge.clientWidth:1024;function qr(r){var e=r.collapsed,i=r.layout,t=r.defaultCollapsed,a=t===void 0?!0:t,n=r.defaultColsNumber,v=r.span,P=r.searchGutter,F=P===void 0?24:P;r.searchText,r.resetText;var l=r.optionRender,m=r.collapseRender,u=r.onReset,p=r.onCollapse,g=r.labelWidth,d=g===void 0?"80":g,h=r.style,N=r.split,A=r.preserve,T=A===void 0?!0:A,w=r.ignoreRules,S=be(r,Ir),M=c.exports.useContext(ie.ConfigContext),k=M.getPrefixCls("pro-form-query-filter"),W=Be(function(){return typeof(h==null?void 0:h.width)=="number"?h==null?void 0:h.width:Dr}),K=Q(W,2),C=K[0],O=K[1],R=c.exports.useMemo(function(){return Nr(i,C+16,v)},[i,C,v]),j=c.exports.useMemo(function(){return n!==void 0?n:Math.max(1,24/R.span)},[n,R.span]),I=c.exports.useMemo(function(){if(d&&R.layout!=="vertical"&&d!=="auto")return{labelCol:{flex:"0 0 ".concat(d,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(d,"px)")}},style:{flexWrap:"nowrap"}}},[R.layout,d]);return o.createElement(rr,{key:"resize-observer",onResize:function(B){C!==B.width&&B.width>17&&O(B.width)}},o.createElement(_r,J({isKeyPressSubmit:!0,preserve:T},S,{className:tr(k,S.className),onReset:u,style:h,layout:R.layout,fieldProps:{style:{width:"100%"}},formItemProps:I,groupProps:{titleStyle:{display:"inline-block",marginRight:16}},contentRender:function(B,L,U){return o.createElement(Br,{spanSize:R,collapsed:e,form:U,collapseRender:m,defaultCollapsed:a,onCollapse:p,optionRender:l,submitter:L,items:B,split:N,resetText:r.resetText,searchText:r.searchText,searchGutter:F,preserve:T,ignoreRules:w,showLength:j})}})))}export{_r as B,qr as Q,yr as o,Cr as u};
